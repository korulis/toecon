upstream loadbalancer {
  least_conn;
  server localhost:3500;
  server localhost:3501;
  server localhost:3502;
  server localhost:3503;
}

server {

	index index.html index.htm index.nginx-debian.html;
	server_name example.com www.example.com;

        # react app & front-end files
        location / {
                root /root/frontend/build;
                try_files $uri /index.html;
        }

        location /api/ {
                proxy_pass http://loadbalancer/;
                proxy_buffering         on;
        }

}